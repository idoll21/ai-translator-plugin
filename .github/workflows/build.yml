        name: Build WordPress Plugin

        on:
          push:
            branches:
              - main # این Workflow با هر push به شاخه main اجرا می‌شود.
          workflow_dispatch: # این به شما اجازه می‌دهد Workflow را به صورت دستی از تب Actions در گیت‌هاب اجرا کنید.

        jobs:
          build:
            runs-on: ubuntu-latest
            steps:
              - name: Checkout code
                uses: actions/checkout@v4

              - name: Set up PHP
                uses: shivammathur/setup-php@v2
                with:
                  php-version: '8.1' # یا هر نسخه PHP که پلاگین شما نیاز دارد
                  extensions: mbstring, pdo_mysql

              - name: Install Composer dependencies
                run: composer install --no-dev --prefer-dist

              - name: Create plugin zip
                run: |
                  zip -r ai-translator-plugin.zip . -x ".git/*" ".github/*" "vendor/*" "composer.json" "composer.lock" "*.md"
                  # این دستور فایل zip را ایجاد می‌کند و پوشه‌های .git و .github و vendor را از آن حذف می‌کند.
                  # همچنین فایل‌های composer.json، composer.lock و فایل‌های markdown را حذف می‌کند.

              - name: Upload plugin artifact
                uses: actions/upload-artifact@v4
                with:
                  name: ai-translator-plugin
                  path: ai-translator-plugin.zip
        
